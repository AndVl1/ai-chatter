# üìã –ù–∞—Å—Ç—Ä–æ–π–∫–∞ NOTION_PARENT_PAGE_ID

## –û–±—è–∑–∞—Ç–µ–ª—å–Ω–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ –¥–ª—è MCP –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏

–°–æ–≥–ª–∞—Å–Ω–æ –æ—Ñ–∏—Ü–∏–∞–ª—å–Ω–æ–º—É API Notion, –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ —Å—Ç—Ä–∞–Ω–∏—Ü **–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ** –Ω—É–∂–Ω–æ —É–∫–∞–∑—ã–≤–∞—Ç—å —Ä–æ–¥–∏—Ç–µ–ª—å—Å–∫—É—é —Å—Ç—Ä–∞–Ω–∏—Ü—É —á–µ—Ä–µ–∑ `parent_page_id`. –ù–∞—à–∞ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å–ª–µ–¥—É–µ—Ç —ç—Ç–æ–º—É —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—é.

## –ö–∞–∫ –ø–æ–ª—É—á–∏—Ç—å Parent Page ID

### –ú–µ—Ç–æ–¥ 1: –ò–∑ URL —Å—Ç—Ä–∞–Ω–∏—Ü—ã –≤ –±—Ä–∞—É–∑–µ—Ä–µ

1. **–û—Ç–∫—Ä–æ–π—Ç–µ Notion** –≤ –±—Ä–∞—É–∑–µ—Ä–µ
2. **–ü–µ—Ä–µ–π–¥–∏—Ç–µ –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü—É**, –∫–æ—Ç–æ—Ä–∞—è –±—É–¥–µ—Ç —Ä–æ–¥–∏—Ç–µ–ª—å—Å–∫–æ–π –¥–ª—è –≤–∞—à–∏—Ö –Ω–æ–≤—ã—Ö —Å—Ç—Ä–∞–Ω–∏—Ü
3. **–°–∫–æ–ø–∏—Ä—É–π—Ç–µ URL** –∏–∑ –∞–¥—Ä–µ—Å–Ω–æ–π —Å—Ç—Ä–æ–∫–∏

URL –±—É–¥–µ—Ç –≤—ã–≥–ª—è–¥–µ—Ç—å —Ç–∞–∫:
```
https://www.notion.so/workspace/My-Page-Name-12345678901234567890123456789012
```

4. **ID —Å—Ç—Ä–∞–Ω–∏—Ü—ã** - —ç—Ç–æ –ø–æ—Å–ª–µ–¥–Ω–∏–µ 32 —Å–∏–º–≤–æ–ª–∞:
```
12345678901234567890123456789012
```

–ò–ª–∏ –≤ —Ñ–æ—Ä–º–∞—Ç–µ —Å –¥–µ—Ñ–∏—Å–∞–º–∏:
```
12345678-9012-3456-7890-123456789012
```

### –ú–µ—Ç–æ–¥ 2: –ß–µ—Ä–µ–∑ API –∑–∞–ø—Ä–æ—Å

```bash
# –ü–æ–∏—Å–∫ —Å—Ç—Ä–∞–Ω–∏—Ü –≤ workspace
curl -X POST 'https://api.notion.com/v1/search' \
  -H 'Authorization: Bearer secret_your_token' \
  -H 'Content-Type: application/json' \
  -H 'Notion-Version: 2022-06-28' \
  --data '{
    "query": "–Ω–∞–∑–≤–∞–Ω–∏–µ –≤–∞—à–µ–π —Å—Ç—Ä–∞–Ω–∏—Ü—ã"
  }'
```

–í –æ—Ç–≤–µ—Ç–µ –Ω–∞–π–¥–∏—Ç–µ –Ω—É–∂–Ω—É—é —Å—Ç—Ä–∞–Ω–∏—Ü—É –∏ —Å–∫–æ–ø–∏—Ä—É–π—Ç–µ –µ—ë `id`.

### –ú–µ—Ç–æ–¥ 3: –°–æ–∑–¥–∞–Ω–∏–µ –Ω–æ–≤–æ–π —Å—Ç—Ä–∞–Ω–∏—Ü—ã

1. **–°–æ–∑–¥–∞–π—Ç–µ –Ω–æ–≤—É—é —Å—Ç—Ä–∞–Ω–∏—Ü—É** –≤ Notion –¥–ª—è –≤–∞—à–∏—Ö –¥–∏–∞–ª–æ–≥–æ–≤
2. **–ù–∞–∑–æ–≤–∏—Ç–µ –µ—ë**, –Ω–∞–ø—Ä–∏–º–µ—Ä: "AI Chatter Dialogs"
3. **–î–∞–π—Ç–µ –¥–æ—Å—Ç—É–ø –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏** –∫ —ç—Ç–æ–π —Å—Ç—Ä–∞–Ω–∏—Ü–µ:
   - –ù–∞–∂–º–∏—Ç–µ "Share" ‚Üí "Connect to integration" ‚Üí –≤—ã–±–µ—Ä–∏—Ç–µ –≤–∞—à—É –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—é
4. **–°–∫–æ–ø–∏—Ä—É–π—Ç–µ ID** –∏–∑ URL

## –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π –æ–∫—Ä—É–∂–µ–Ω–∏—è

### –í .env —Ñ–∞–π–ª–µ:
```bash
NOTION_PARENT_PAGE_ID=12345678-9012-3456-7890-123456789012
```

### –ò–ª–∏ —ç–∫—Å–ø–æ—Ä—Ç:
```bash
export NOTION_PARENT_PAGE_ID=12345678-9012-3456-7890-123456789012
```

## –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏

### 1. –¢–µ—Å—Ç –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è
```bash
# –£–±–µ–¥–∏—Ç–µ—Å—å —á—Ç–æ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã
echo $NOTION_TOKEN
echo $NOTION_PARENT_PAGE_ID

# –ó–∞–ø—É—Å—Ç–∏—Ç–µ —Ç–µ—Å—Ç
./scripts/test-custom-mcp.sh
```

### 2. –û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç –ø—Ä–∏ –ø—Ä–∞–≤–∏–ª—å–Ω–æ–π –Ω–∞—Å—Ç—Ä–æ–π–∫–µ:
```
‚úÖ Dialog saved: Dialog 'Test Dialog from Custom MCP' saved to Notion
‚úÖ Page created: Successfully created page 'Custom MCP Test Page' in Notion
```

### 3. –û—à–∏–±–∫–∏ –ø—Ä–∏ –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ–π –Ω–∞—Å—Ç—Ä–æ–π–∫–µ:

**–ï—Å–ª–∏ NOTION_PARENT_PAGE_ID –Ω–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω:**
```
‚ùå parent_page_id is required - get it from your Notion workspace
```

**–ï—Å–ª–∏ parent page ID –Ω–µ–≤–µ—Ä–Ω—ã–π:**
```
‚ùå Failed to create page: Notion API error 400: {"object":"error","status":400,"code":"validation_error","message":"parent page not found"}
```

**–ï—Å–ª–∏ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –Ω–µ –∏–º–µ–µ—Ç –¥–æ—Å—Ç—É–ø–∞ –∫ —Å—Ç—Ä–∞–Ω–∏—Ü–µ:**
```
‚ùå Failed to create page: Notion API error 403: {"object":"error","status":403,"code":"unauthorized","message":"integration does not have access to the parent page"}
```

## –†–µ—à–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º

### –ü—Ä–æ–±–ª–µ–º–∞: "parent page not found"

**–ü—Ä–∏—á–∏–Ω–∞:** –ù–µ–≤–µ—Ä–Ω—ã–π ID —Å—Ç—Ä–∞–Ω–∏—Ü—ã –∏–ª–∏ —Å—Ç—Ä–∞–Ω–∏—Ü–∞ –±—ã–ª–∞ —É–¥–∞–ª–µ–Ω–∞

**–†–µ—à–µ–Ω–∏–µ:**
1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø—Ä–∞–≤–∏–ª—å–Ω–æ—Å—Ç—å ID
2. –£–±–µ–¥–∏—Ç–µ—Å—å —á—Ç–æ —Å—Ç—Ä–∞–Ω–∏—Ü–∞ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ñ–æ—Ä–º–∞—Ç ID (32 —Å–∏–º–≤–æ–ª–∞ –∏–ª–∏ —Å –¥–µ—Ñ–∏—Å–∞–º–∏)

### –ü—Ä–æ–±–ª–µ–º–∞: "integration does not have access"

**–ü—Ä–∏—á–∏–Ω–∞:** –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –Ω–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∞ –∫ —Å—Ç—Ä–∞–Ω–∏—Ü–µ

**–†–µ—à–µ–Ω–∏–µ:**
1. –û—Ç–∫—Ä–æ–π—Ç–µ —Ä–æ–¥–∏—Ç–µ–ª—å—Å–∫—É—é —Å—Ç—Ä–∞–Ω–∏—Ü—É –≤ Notion
2. –ù–∞–∂–º–∏—Ç–µ "Share" (–∏–ª–∏ —Ç—Ä–∏ —Ç–æ—á–∫–∏ ‚Üí "Settings" ‚Üí "Share")
3. "Connect to integration" ‚Üí –≤—ã–±–µ—Ä–∏—Ç–µ –≤–∞—à—É –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—é
4. –£–±–µ–¥–∏—Ç–µ—Å—å —á—Ç–æ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –ø–æ—è–≤–∏–ª–∞—Å—å –≤ —Å–ø–∏—Å–∫–µ

### –ü—Ä–æ–±–ª–µ–º–∞: "invalid parent object"

**–ü—Ä–∏—á–∏–Ω–∞:** –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ parent –≤ API

**–†–µ—à–µ–Ω–∏–µ:** –£–±–µ–¥–∏—Ç–µ—Å—å —á—Ç–æ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç–µ –æ–±–Ω–æ–≤–ª—ë–Ω–Ω—É—é –≤–µ—Ä—Å–∏—é MCP —Å–µ—Ä–≤–µ—Ä–∞ —Å –ø—Ä–∞–≤–∏–ª—å–Ω—ã–º —Ñ–æ—Ä–º–∞—Ç–æ–º:
```json
{
  "parent": {
    "type": "page_id",
    "page_id": "–≤–∞—à-parent-page-id"
  }
}
```

## –ü—Ä–∏–º–µ—Ä –ø–æ–ª–Ω–æ–π –Ω–∞—Å—Ç—Ä–æ–π–∫–∏

```bash
# .env file
NOTION_TOKEN=secret_abc123def456
NOTION_PARENT_PAGE_ID=550e8400-e29b-41d4-a716-446655440000

# –¢–µ—Å—Ç
export NOTION_TOKEN=secret_abc123def456
export NOTION_PARENT_PAGE_ID=550e8400-e29b-41d4-a716-446655440000
./test-custom-mcp
```

## –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

‚ö†Ô∏è **–í–∞–∂–Ω–æ**: 
- –ù–∏–∫–æ–≥–¥–∞ –Ω–µ –∫–æ–º–º–∏—Ç—å—Ç–µ —Ä–µ–∞–ª—å–Ω—ã–µ —Ç–æ–∫–µ–Ω—ã –≤ git
- –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ `.env` —Ñ–∞–π–ª –∏ –¥–æ–±–∞–≤—å—Ç–µ –µ–≥–æ –≤ `.gitignore`
- Parent page ID –Ω–µ —è–≤–ª—è–µ—Ç—Å—è —Å–µ–∫—Ä–µ—Ç–æ–º, –Ω–æ –ª—É—á—à–µ —Ç–æ–∂–µ –¥–µ—Ä–∂–∞—Ç—å –≤ `.env`

## –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Å—Ç—Ä–∞–Ω–∏—Ü

–ü–æ—Å–ª–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –≤–∞—à–∏ –¥–∏–∞–ª–æ–≥–∏ –±—É–¥—É—Ç —Å–æ–∑–¥–∞–≤–∞—Ç—å—Å—è –∫–∞–∫ –¥–æ—á–µ—Ä–Ω–∏–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã:

```
üìÑ AI Chatter Dialogs (parent page)
  ‚îú‚îÄ‚îÄ üìù Dialog: –û–±—Å—É–∂–¥–µ–Ω–∏–µ MCP
  ‚îú‚îÄ‚îÄ üìù Dialog: –í–æ–ø—Ä–æ—Å—ã –ø–æ API
  ‚îú‚îÄ‚îÄ üìÑ Custom MCP Test Page
  ‚îî‚îÄ‚îÄ üìÑ –î—Ä—É–≥–∏–µ —Å–æ–∑–¥–∞–Ω–Ω—ã–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã
```

–≠—Ç–æ –æ–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏—é –∏ –ø–æ–∑–≤–æ–ª—è–µ—Ç –ª–µ–≥–∫–æ –Ω–∞–π—Ç–∏ –≤—Å–µ —Å–æ–∑–¥–∞–Ω–Ω—ã–µ –±–æ—Ç–æ–º —Å—Ç—Ä–∞–Ω–∏—Ü—ã.

# RuStore API v1 Migration Guide

## üöÄ –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –¥–æ –∞–∫—Ç—É–∞–ª—å–Ω–æ–π –≤–µ—Ä—Å–∏–∏ RuStore API

AI Chatter –æ–±–Ω–æ–≤–ª–µ–Ω –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –∞–∫—Ç—É–∞–ª—å–Ω–æ–π –≤–µ—Ä—Å–∏–µ–π [RuStore API v1](https://www.rustore.ru/help/work-with-rustore-api/api-upload-publication-app/create-draft-version).

## üìã –û—Å–Ω–æ–≤–Ω—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è

### 1. **Endpoint –æ–±–Ω–æ–≤–ª–µ–Ω**
```bash
# –°—Ç–∞—Ä—ã–π (–Ω–µ–∞–∫—Ç—É–∞–ª—å–Ω—ã–π):
POST /application/{app_id}/version

# –ù–æ–≤—ã–π (–∞–∫—Ç—É–∞–ª—å–Ω—ã–π):
POST /public/v1/application/{packageName}/version
```

### 2. **–ò–∑–º–µ–Ω–µ–Ω–∏—è –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤**

#### –û—Å–Ω–æ–≤–Ω–æ–π –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä:
- ‚ùå `app_id` ‚Üí ‚úÖ `package_name` (–Ω–∞–ø—Ä–∏–º–µ—Ä: `com.myapp.example`)

#### –ù–æ–≤—ã–µ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ –∑–∞–≥–æ–ª–æ–≤–∫–∏:
- ‚ùå `Authorization: Bearer {token}` ‚Üí ‚úÖ `Public-Token: {token}`

### 3. **–ù–æ–≤—ã–µ –ø–æ–ª—è –∑–∞–ø—Ä–æ—Å–∞**

#### –û—Å–Ω–æ–≤–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è:
```json
{
  "appName": "–ù–∞–∑–≤–∞–Ω–∏–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è",
  "appType": "GAMES –∏–ª–∏ MAIN",
  "categories": ["health", "news"],
  "ageLegal": "6+",
  "shortDescription": "–ö—Ä–∞—Ç–∫–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ (80 —Å–∏–º–≤–æ–ª–æ–≤)",
  "fullDescription": "–ü–æ–ª–Ω–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ (4000 —Å–∏–º–≤–æ–ª–æ–≤)",
  "whatsNew": "–ß—Ç–æ –Ω–æ–≤–æ–≥–æ (5000 —Å–∏–º–≤–æ–ª–æ–≤)",
  "moderInfo": "–ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π –¥–ª—è –º–æ–¥–µ—Ä–∞—Ç–æ—Ä–∞ (180 —Å–∏–º–≤–æ–ª–æ–≤)"
}
```

#### –ö–æ–º–º–µ—Ä—á–µ—Å–∫–∏–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã:
```json
{
  "priceValue": 8799,  // –¶–µ–Ω–∞ –≤ –∫–æ–ø–µ–π–∫–∞—Ö (87.99 —Ä—É–± = 8799)
  "seoTagIds": [100, 102]  // ID SEO —Ç–µ–≥–æ–≤ (–º–∞–∫—Å 5)
}
```

#### –ü–∞—Ä–∞–º–µ—Ç—Ä—ã –ø—É–±–ª–∏–∫–∞—Ü–∏–∏:
```json
{
  "publishType": "MANUAL|INSTANTLY|DELAYED",
  "publishDateTime": "2022-07-08T13:24:41.8328711+03:00",  // –î–ª—è DELAYED
  "partialValue": 5  // –ü—Ä–æ—Ü–µ–Ω—Ç —á–∞—Å—Ç–∏—á–Ω–æ–π –ø—É–±–ª–∏–∫–∞—Ü–∏–∏: 5, 10, 25, 50, 75, 100
}
```

### 4. **–ù–æ–≤—ã–π —Ñ–æ—Ä–º–∞—Ç –æ—Ç–≤–µ—Ç–∞**

#### –°—Ç–∞—Ä—ã–π —Ñ–æ—Ä–º–∞—Ç:
```json
{
  "body": {
    "versionId": "243242",
    "versionName": "1.0.6",
    "versionCode": 42,
    "status": "draft"
  }
}
```

#### –ù–æ–≤—ã–π —Ñ–æ—Ä–º–∞—Ç:
```json
{
  "code": "OK",
  "message": null,
  "body": 243242,  // Version ID –∫–∞–∫ —á–∏—Å–ª–æ
  "timestamp": "2023-07-27T10:28:59.039649+03:00"
}
```

## üîß –û–±–Ω–æ–≤–ª–µ–Ω–∏—è –≤ AI Chatter

### MCP Server (`cmd/rustore-mcp-server/main.go`)
- ‚úÖ –û–±–Ω–æ–≤–ª–µ–Ω endpoint –Ω–∞ `/public/v1/application/{packageName}/version`
- ‚úÖ –ó–∞–≥–æ–ª–æ–≤–æ–∫ `Public-Token` –≤–º–µ—Å—Ç–æ `Authorization`
- ‚úÖ –ù–æ–≤—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –≤ `RuStoreCreateDraftParams`
- ‚úÖ –û–±–Ω–æ–≤–ª–µ–Ω–Ω–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –æ—Ç–≤–µ—Ç–∞ `RuStoreDraftResponse`

### MCP Client (`internal/rustore/mcp.go`)
- ‚úÖ –û–±–Ω–æ–≤–ª–µ–Ω–∞ —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ `CreateDraftParams`
- ‚úÖ –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –≤—Å–µ—Ö –Ω–æ–≤—ã—Ö –ø–æ–ª–µ–π API v1
- ‚úÖ –î–∏–Ω–∞–º–∏—á–µ—Å–∫–æ–µ —Ñ–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–∏–µ –∑–∞–ø—Ä–æ—Å–∞ (—Ç–æ–ª—å–∫–æ –Ω–µ–ø—É—Å—Ç—ã–µ –ø–æ–ª—è)
- ‚úÖ –û–±—Ä–∞—Ç–Ω–∞—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å —Å —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–º–∏ –∫–ª–∏–µ–Ω—Ç–∞–º–∏

## üéØ –ü—Ä–∞–∫—Ç–∏—á–µ—Å–∫–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

### –ö–æ–º–∞–Ω–¥–∞ `/release_rc`
–¢–µ–ø–µ—Ä—å –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –≤—Å–µ –Ω–æ–≤—ã–µ –ø–æ–ª—è RuStore API v1:

```
/release_rc
üì¶ –†–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π: AndVl1/SnakeGame
üè™ Package Name: com.andvl1.snakegame
üì± App Type: GAMES
üè∑Ô∏è Categories: arcade, puzzle
üîû Age Rating: 12+
üí∞ Price: Free
üìÑ Descriptions: Auto-generated
üöÄ Publish Type: MANUAL
```

### –ö–æ–º–∞–Ω–¥–∞ `/ai_release`
AI Agent —Ç–µ–ø–µ—Ä—å –º–æ–∂–µ—Ç –∑–∞–ø–æ–ª–Ω–∏—Ç—å –≤—Å–µ –ø–æ–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏:

```
/ai_release
ü§ñ AI –±—É–¥–µ—Ç –∑–∞–ø–æ–ª–Ω—è—Ç—å:
‚úÖ App Name, Type, Categories
‚úÖ Age Rating, Descriptions
‚úÖ SEO Tags, Price Value
‚úÖ Publish Type, Partial Value
```

## ‚öôÔ∏è –ù–∞—Å—Ç—Ä–æ–π–∫–∞

### Environment Variables
```bash
# RuStore API v1 –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
RUSTORE_COMPANY_ID=your_company_id
RUSTORE_KEY_ID=your_key_id  
RUSTORE_KEY_SECRET=your_key_secret
RUSTORE_MCP_SERVER_PATH=./bin/rustore-mcp-server
```

### –ü–æ–ª—É—á–µ–Ω–∏–µ —Ç–æ–∫–µ–Ω–∞ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏
–°–ª–µ–¥—É–π—Ç–µ [–æ—Ñ–∏—Ü–∏–∞–ª—å–Ω–æ–π –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏ RuStore](https://www.rustore.ru/help/work-with-rustore-api/api-authorization-token) –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è —Ç–æ–∫–µ–Ω–∞.

## üìö –ü–æ–ª–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

- [RuStore API v1 - –°–æ–∑–¥–∞–Ω–∏–µ —á–µ—Ä–Ω–æ–≤–∏–∫–∞](https://www.rustore.ru/help/work-with-rustore-api/api-upload-publication-app/create-draft-version)
- [–°–ø–∏—Å–æ–∫ –∫–∞—Ç–µ–≥–æ—Ä–∏–π –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π](https://www.rustore.ru/help/work-with-rustore-api/api-upload-publication-app/app-category-list)
- [–°–ø–∏—Å–æ–∫ –ø–æ–∏—Å–∫–æ–≤—ã—Ö —Ç–µ–≥–æ–≤](https://www.rustore.ru/help/work-with-rustore-api/api-upload-publication-app/app-tag-list)

## üîÑ –û–±—Ä–∞—Ç–Ω–∞—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å

–í—Å–µ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ –ø—Ä–æ–¥–æ–ª–∂–∞—Ç —Ä–∞–±–æ—Ç–∞—Ç—å –±–ª–∞–≥–æ–¥–∞—Ä—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–º—É –º–∞–ø–ø–∏–Ω–≥—É:
- `app_id` ‚Üí `package_name`
- –°—Ç–∞—Ä—ã–µ –ø–æ–ª—è –ø–µ—Ä–µ–≤–æ–¥—è—Ç—Å—è –≤ –Ω–æ–≤—ã–µ
- –ú–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ –æ—Ç–≤–µ—Ç–æ–≤ –∞–¥–∞–ø—Ç–∏—Ä—É—é—Ç—Å—è

## üéâ –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è

1. **–ê–∫—Ç—É–∞–ª—å–Ω–æ—Å—Ç—å**: –°–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ –ø–æ—Å–ª–µ–¥–Ω–µ–π –≤–µ—Ä—Å–∏–∏ RuStore API
2. **–†–∞—Å—à–∏—Ä–µ–Ω–Ω–æ—Å—Ç—å**: –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –≤—Å–µ—Ö –Ω–æ–≤—ã—Ö –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–µ–π
3. **–ì–∏–±–∫–æ—Å—Ç—å**: –ù–æ–≤—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –ø—É–±–ª–∏–∫–∞—Ü–∏–∏ –∏ –∫–æ–º–º–µ—Ä—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏
4. **AI-–≥–æ—Ç–æ–≤–Ω–æ—Å—Ç—å**: –ü–æ–ª–Ω–∞—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å AI Release System
5. **–ù–∞–¥–µ–∂–Ω–æ—Å—Ç—å**: –ü—Ä–∞–≤–∏–ª—å–Ω—ã–µ –∑–∞–≥–æ–ª–æ–≤–∫–∏ –∏ —Ñ–æ—Ä–º–∞—Ç—ã –∑–∞–ø—Ä–æ—Å–æ–≤

–¢–µ–ø–µ—Ä—å AI Chatter –ø–æ–ª–Ω–æ—Å—Ç—å—é –≥–æ—Ç–æ–≤ –∫ —Ä–∞–±–æ—Ç–µ —Å —Å–æ–≤—Ä–µ–º–µ–Ω–Ω–æ–π RuStore –ø–ª–∞—Ç—Ñ–æ—Ä–º–æ–π! üöÄ
